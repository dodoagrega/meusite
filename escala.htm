<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Escala de Operações</title>
    <style>
        body { font-family: Arial, sans-serif; background-color: #f8f8f8; padding: 20px; }
        h1 { text-align: center; color: #333; }
        .card { background-color: #fff; border-radius: 8px; padding: 15px; box-shadow: 0 0 10px rgba(0, 0, 0, 0.1); margin-bottom: 20px; }
        .op { margin: 5px; padding: 5px 10px; border-radius: 5px; color: white; }
        .Front { background-color: #4caf50; }
        .Back { background-color: #2196f3; }
        .Portas { background-color: #ff9800; }
        .carro { margin-top: 10px; }
        .refino { margin-top: 20px; font-weight: bold; }
    </style>
</head>
<body>

<h1>Escala de Operações da Semana ok </h1>

<div id="escala"></div>

<script>
// Dados da escala
const equipesBase = {
    "Equipe 1": ["Willians", "L. Ferreira", "Fernando"],
    "Equipe 2": ["Sérgio", "Tiago", "Cal"],
    "Equipe 3": ["Dodo", "Elizeu", "Hércules"],
    "Equipe 4": ["Glauco", "Rodrigão"],
    "Equipe 5": ["Felipe", "Marcus V."]
};

const mortoInicial = ["Elizeu", "Dodo", "Rodrigão", "Cal", "Fernando"]; // Escalados para o Morto
const rodizioCarros = [
    ["Equipe 1", "Equipe 2", "Equipe 3"],
    ["Equipe 2", "Equipe 3", "Equipe 1"],
    ["Equipe 3", "Equipe 1", "Equipe 2"],
    ["Equipe 1", "Equipe 2", "Equipe 3"],
    ["Equipe 2", "Equipe 3", "Equipe 1"]
];
const operacoes = ["Front", "Back", "Portas"];

const escalaDiv = document.getElementById("escala");
let ciclos = {};
let ciclosFixos = {
    "Glauco": 0, "Rodrigão": 1,
    "Felipe": 0, "Marcus V.": 1
};

let refinoHoje = mortoInicial[0];

// Ciclo de operações para os trabalhadores (0 - Front, 1 - Back, 2 - Portas)
for (const [equipe, membros] of Object.entries(equipesBase)) {
    for (const nome of membros) {
        ciclos[nome] = 0;
    }
}

for (let d = 0; d < 5; d++) {
    const card = document.createElement("div");
    card.className = "card";

    const titulo = document.createElement("h2");
    titulo.textContent = ["Segunda", "Terça", "Quarta", "Quinta", "Sexta"][d];
    card.appendChild(titulo);

    // Preparar as equipes, removendo o nome do escalado para o Morto
    const equipesDia = JSON.parse(JSON.stringify(equipesBase));  // Cópia profunda
    for (const equipe of ["Equipe 1", "Equipe 2", "Equipe 3"]) {
        equipesDia[equipe] = equipesDia[equipe].filter(n => n !== refinoHoje);
    }

    // Distribuir as equipes pelos Carros 1-3
    for (let c = 0; c < 3; c++) {
        const equipeNome = rodizioCarros[d][c];
        const membros = equipesDia[equipeNome];
        let detalhe = `<strong>Carro ${c + 1}:</strong><br>`;
        membros.forEach(membro => {
            let op = operacoes[ciclos[membro] % 3];
            detalhe += `- ${membro}: <span class="op ${op}">${op}</span><br>`;
            ciclos[membro] = (ciclos[membro] + 8) % 3;  // Avança 8h para o próximo dia
        });
        const div = document.createElement("div");
        div.className = "carro";
        div.innerHTML = detalhe;
        card.appendChild(div);
    }

    // Carros 4 e 5 fixos
    ["Carro 4", "Carro 5"].forEach((carro, idx) => {
        const dupla = idx === 0 ? ["Glauco", "Rodrigão"] : ["Felipe", "Marcus V."];
        let detalhe = `<strong>${carro}:</strong><br>`;
        dupla.forEach(membro => {
            const op = operacoes[ciclosFixos[membro] % 2 * 2];  // Front ou Portas
            detalhe += `- ${membro}: <span class="op ${op}">${op}</span><br>`;
            ciclosFixos[membro] = (ciclosFixos[membro] + 8) % 2;
        });
        const div = document.createElement("div");
        div.className = "carro";
        div.innerHTML = detalhe;
        card.appendChild(div);
    });

    // Mostrar o nome do escalado para o Morto
    const refinoDiv = document.createElement("div");
    refinoDiv.className = "refino";
    refinoDiv.innerHTML = `<strong>Morto/Refino:</strong> ${refinoHoje}`;
    card.appendChild(refinoDiv);

    // Atualizar para o próximo dia (substituição do escalado para o Morto)
    if (d < 4) {
        const idxHoje = mortoInicial.indexOf(refinoHoje);
        refinoHoje = mortoInicial[(idxHoje + 1) % mortoInicial.length];
    }

    escalaDiv.appendChild(card);
}
</script>

</body>
</html>